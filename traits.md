# Типажи

## Common

Ручное подключение типажа `Common` не требуется, т. к. он подключается автоматически по всех компонентах ББК. Common обеспечивает обработку аякс-запросов, исключений, рассылает уведомления, осуществляет кеширование результатов, подключает модули, проверяет и приводит входящие параметры и делает многое другое.

Наиболее часто используемые методы перечислены в таблице ниже.

Авт. | Метод | Комментарий
-------------- | -------------- | --------------
+ | `includeModules()` | Подключает модули, переданные в свойстве `needModules` класса компонента.
- | `startCache()` | Начинает кеширование результатов работы компонента.
- | `writeCache()` | Завершает кеширование.
- | `abortCache()` | Останавливает и отменяет кеширование.
- | `addCacheAdditionalId()` | Добавление дополнительного идентификатора кеша.
+ | `returnDatas()` | Вывод результатов работы компонента. По-умолчанию — подключение шаблона компонента.
- | `return404()` | Установка ХТТП-статуса 404 и константы `ERROR_404` в значение Y.
+ | `catchException()` | Перехватчик исключения. Вызывается в блоке `catch {}` метода `executeComponent()`.
+ | `sendNotifyException()` | Отправка уведомления на почту администратора о выброшенном исключении.
+ | `showExceptionUser()` | Отображении сообщения об ошибке при выброшенном исключении простому пользователю.
+ | `showExceptionAdmin()` | Отображении сообщения об ошибке при выброшенном исключении администратору сайта.
- | `isAjax()` | Проверка, является ли текущее обращение к компоненту аякс-запросом.
- | `registerCacheTag()` | Регистрация тега кеша.

<aside class="notice">
Авт. — метод вызывается автоматически во время исполнения компонента
</aside>

## Elements

`Elements` предоставляет функционал, наиболее часто используемый в компонентах, работающих с инфоблоками: обработка и подготовка параметров для выборки элементов инфоблока, генерация строки постраничной навигации и интерфейса «Эрмитажа», работа с глобальным фильтром. А так же СЕО-фичи: установка мета-тегов из настроек инфоблока и опен-граф тегов для соцсетей, генерация короткой ссылки и хлебных крошек.

Для получения функционала типажа `Elements` нужно только подключить его:

```php
<?php

class Test extends Basis
{
	use Elements;
}
```

Наиболее часто используемые методы перечислены в таблице ниже.


Авт. | Метод | Комментарий
-------------- | -------------- | --------------
+ | `setNavStartParams()` | Установка параметров для постраничной навигации.
- | `generateNav()` | Генерация строки постраничной навигации.
- | `getShortLink()` | Возвращает короткую ссылку для страницы.
- | `addGlobalFilters()` | Добавление дополнительных условий в глобальный фильтр.
- | `addParamsGrouping()` | Добавление параметров группировки для гет-листа элементов.
- | `addParamsNavStart()` | Добавление параметров постраничной навигации для гет-листа элементов.
- | `addParamsSelected()` | Добавление выбираемых полей и свойств гет-листом элементов.
- | `getParamsSort()` | Получение параметров сортировки для гет-листа элементов.
- | `getParamsFilters()` | Получение фильтра для гет-листа элементов.
- | `getParamsGrouping()` | Получение параметров группировки для гет-листа элементов.
- | `getParamsNavStart()` | Получение параметров сортировки для гет-листа элементов.
- | `getParamsSelected()` | Получение запрашиваемых полей и свойств для гет-листа элементов.
- | `getProcessingMethod()` | Получение названия метода, с помощью которого будет производиться обработка результатов гет-листа.
- | `prepareElementsResult()` | Метод-перехватчик для обработки результатов гет-листа элементов инфоблока. Вызывается на каждой итерации цикла. Должен вернуть массив, который будет помещён в свойство `arResult` класса компонента, либо `false` для пропуска итерации.

<aside class="notice">
Авт. — метод вызывается автоматически во время исполнения компонента
</aside>